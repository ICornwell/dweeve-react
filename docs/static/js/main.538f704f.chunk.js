(this["webpackJsonpdweeve-react"]=this["webpackJsonpdweeve-react"]||[]).push([[0],{101:function(e,n,t){},110:function(e,n,t){e.exports=t(592)},115:function(e,n,t){},547:function(e,n,t){},592:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(7),c=t.n(o),l=(t(115),t(6)),s=t(12),i=t(66),m=t(88),d=t.n(m),u=t(57),p=t(647),b=t(637);function f(e){var n=e.children,t=e.value,a=e.index,o=Object(u.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({className:"tab-Content",height:"100%",role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},o),t===a&&n)}var h=function(e){var n=r.a.useState(0),t=Object(s.a)(n,2),a=t[0],o=t[1];return r.a.createElement("div",{className:"resource-Panel"},r.a.createElement(p.a,{className:"tabbar",value:a,onChange:function(e,n){o(n)},"aria-label":"simple tabs example"},e.captions.map((function(e,n){return r.a.createElement(b.a,Object.assign({key:"tab"+n,label:e},{id:"simple-tab-".concat(t=n),"aria-controls":"simple-tabpanel-".concat(t)}));var t}))),e.children.map((function(e,n){return r.a.createElement(f,{key:"tabpanel"+n,value:a,index:n},e)})))},v=t(93),y=t.n(v),w=(t(124),t(125),t(126),t(127),t(128),t(543),r.a.forwardRef((function(e,n){var t=r.a.useState({props:e.value,ace:e.value}),a=Object(s.a)(t,2),o=a[0],c=a[1];return e.value!==o.props&&c({props:e.value,ace:e.value}),r.a.createElement(y.a,{height:"100%",width:"100%",mode:"dwl",theme:"dweeve",ref:n,value:o.ace,onChange:function(n){c(Object(l.a)(Object(l.a)({},o),{},{ace:n})),e.onChange&&e.onChange(n)},name:e.name,editorProps:{$blockScrolling:!0}})}))),j=t(20),g=t(638),E=t(649),O=t(643),x=t(639),R=t(640),C=t(641),k=t(642),I=t(94),P=t.n(I),N=t(95),T=t.n(N),S=t(37),V=t(31),B=function(){function e(){Object(S.a)(this,e),this.examples={},this.createExamples()}return Object(V.a)(e,[{key:"getExample",value:function(e){return this.examples[e]}},{key:"getExamplesList",value:function(){return Object.keys(this.examples)}},{key:"createExamples",value:function(){this.examples["Simple function"]={dwl:"%dw 2.0\nfun toUser(obj) = {\nfirstName: obj.field1,\nlastName: obj.field2\n}\n---\ntoUser(payload)",payload:'{\n"field1": "Bob",\n"field2": "Jones"\n}'},this.examples["Get people"]={dwl:"%dw 2.0\n\noutput application/json\n---\npayload.people.person.address.street",payload:'{\n"people": [\n  {\n  "person": {\n      "name": "Nial",\n      "address": {\n      "street": {\n          "name": "Italia",\n          "number": 2164\n      },\n      "area": {\n          "zone": "San Isidro",\n          "name": "Martinez"\n      }\n      }\n  }\n  },\n  {\n  "person": {\n      "name": "Coty",\n      "address": {\n      "street": {\n          "name": "Monroe",\n          "number": 323\n      },\n      "area": {\n          "zone": "BA",\n          "name": "Belgrano"\n      }\n      }\n  }\n  }\n]\n}'},this.examples["All descendents"]={dwl:"%dw 2.0\noutput application/json\n---\npayload.users..*name",payload:'{ "users" : {\n"user": {"name":"a"},\n"user": {"name":"b"},\n"user": {"name":"c", "name":"d"}\n}\n}'},this.examples["Mixed matching"]={dwl:'%dw 2.0\n---\n{\na: payload.string match {\n  case str if str == "Emiliano" -> str ++ " Lesende"\n  case myVar if (myVar == "strings") -> ("strings =" ++ myVar)\n  case word matches /(hello)\\s\\w+/ ->  word[1]  ++ " was matched"\n},\nb: payload.bool match {\n  case num is Boolean -> "could be true or false:" ++ num\n  case is Object -> "we got an Object"\n  case "bob"  -> "is bob!"\n  case word: "bang" ->  word ++ " was matched"\n},\nc: payload.name match {\n  case str if str == "Emiliano" -> str ++ " Lesende"\n  case myVar if (myVar == "strings") -> ("strings =" ++ myVar)\n  case word matches /(hello)\\s\\w+/ ->  word[1]  ++ " was matched"\n},\nd: payload.object match {\n  case num is Boolean -> "could be true or false:" ++ num\n  case is Object -> "we got an Object"\n  case "bob"  -> "is bob!"\n  case word: "bang" ->  word ++ " was matched"\n},\ne: payload.strings match {\n  case str if str == "Emiliano" -> str ++ " Lesende"\n  case myVar if (myVar == "strings") -> ("strings =" ++ myVar)\n  case word matches /(hello)\\s\\w+/ ->  word[1]  ++ " was matched"\n},\nf: payload.object.name match {\n  case num is Boolean -> "could be true or false:" ++ num\n  case is Object -> "we got an Object"\n  case "bob"  -> "is bob!"\n  case word: "bang" ->  word ++ " was matched"\n},\ng: payload.bangtest match {\n  case num is Boolean -> "could be true or false:" ++ num\n  case is Object -> "we got an Object"\n  case "bob"  -> "is bob!"\n  case word: "bang" ->  word ++ " was matched"\n},\nh: payload.number match {\n  case num is Boolean -> "could be true or false:" ++ num\n  case is Object -> "we got an Object"\n  case "bob"  -> "is bob!"\n  case word: "bang" ->  word ++ " was matched"\n}\n}',payload:'{ "string": "hello fred", "number": 90,\n    "object" : {"name" : "bob"}, "bool" : true,\n    "name" : "Emiliano", "strings" : "strings", "bangtest" : "bang"}'},this.examples["Simple Lambda"]={dwl:'%dw 2.0\nvar myLambda = (a,b)-> { (a) : b}\n---\nmyLambda("key","value")',payload:""},this.examples["Do scope"]={dwl:'%dw 2.0\noutput application/json\nfun test(p) = do {\n  var a = "Foo" ++ p\n  ---\n  a\n}\n---\n{ result: test(" Bar") }',payload:""},this.examples["Xml input"]={dwl:"%dw 2.0\noutput application/xml\n---\n{\n  prices: payload.prices mapObject (value, key) -> {\n      (key): (value + 5)\n  }\n}",payload:"<?xml version='1.0' encoding='UTF-8'?>\n<prices>\n  <basic>14.99</basic>\n  <premium>53.01</premium>\n  <vip>398.99</vip>\n</prices>"},this.examples["Recursion!"]={payload:'{\n      "command":{\n        "version":"1.0.0",\n        "user":"ian",\n        "commandDate":"2019-10-20T11:15:30",\n        "response":[\n          {\n            "object":{\n              "type":"policyHeader",\n              "schema":"policyHeader",\n              "schemaVersion":"1.0.0",\n              "commandId":"PH001",\n              "content":{\n                "polifcyRef":"xyz-124",\n                "inceptionDate":"2019-11-01T00:00:00",\n                "expiryDate":"2020-10-31T23:59:59"\n              }\n            }\n          },\n          {\n            "object":{\n              "type":"customer",\n              "schema":"customer",\n              "schemaVersion":"1.0.0",\n              "commandId":"CU001",\n              "content":{\n                "extRef":"sf00001abc"\n              }\n            }\n          },\n          {\n            "object":{\n              "type":"broker",\n              "schema":"broker",\n              "schemaVersion":"1.0.0",\n              "commandId":"BR001",\n              "content":{\n                "brokerRef":"br00111"\n              }\n            }\n          },\n          {\n            "object":{\n              "type":"coverage",\n              "schema":"coverage",\n              "schemaVersion":"1.0.0",\n              "commandId":"CV001",\n              "content":{\n                "coverageRef":"covRef00111"\n              }\n            }\n          },\n          {\n            "object":{\n              "type":"insuredObject",\n              "schema":"insuredObject",\n              "schemaVersion":"1.0.0",\n              "commandId":"IO001",\n              "content":{\n                "insuredType":"motor",\n                "make":"Ford",\n                "model":"Fiesta",\n                "engine": "2.0"\n              }\n            }\n          },\n          {\n            "object":{\n              "type":"insuredObject",\n              "schema":"insuredObject",\n              "schemaVersion":"1.0.0",\n              "commandId":"IO002",\n              "content":{\n                "insuredType":"property",\n                "description":"office",\n                "fire":"yes"\n              }\n            }\n          },\n          {\n            "relation":{\n              "from":"PH001",\n              "to":"CU001",\n              "rType":"belongsTo"\n            }\n          },\n          {\n            "relation":{\n              "from":"CU001",\n              "to":"PH001",\n              "rType":"hasPolicy"\n            }\n          }\n        ]\n      }\n    }',resourceText:'{\n      "view":{\n        "name":"motorPolicy-quote",\n        "version":"1.0.0",\n        "viewStyle":"hierarchy",\n        "viewElement":{\n          "object":"policyHeader",\n          "elementRef":"PH001",\n          "childObjects":[\n            {\n              "viewElement":{\n                "object":"customer",\n                "elementRef":"CU001",\n                "multiplicity":"single",\n                "relationFromParent":"belongsTo",\n                "relationToParent":"hasPolicy"\n              }\n            },\n            {\n              "viewElement":{\n                "object":"broker",\n                "elementRef":"BR001",\n                "multiplicity":"single",\n                "relationFromParent":"managedBy",\n                "relationToParent":"managesPolicy"\n              }\n            },\n            {\n              "viewElement":{\n                "object":"coverage",\n                "elementRef":"CV001",\n                "multiplicity":"oneOrMore",\n                "relationFromParent":"hasCover",\n                "relationToParent":"coveredBy",\n                "relationToOther":{\n                  "elementRef":"C001",\n                  "type":"hasCover"\n                },\n                "childObjects":[\n                  {\n                    "viewElement":{\n                      "object":"insuredObject",\n                      "elementRef":"IO001",\n                      "multiplicity":"oneOrMore",\n                      "relationFromParent":"covers",\n                      "relationToParent":"coveredBy"\n                    }\n                  },\n                  {\n                    "viewElement":{\n                      "object":"insuredObject",\n                      "elementRef":"IO002",\n                      "multiplicity":"oneOrMore",\n                      "relationFromParent":"covers",\n                      "relationToParent":"coveredBy"\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      }\n    }',resourceName:"classpath://dw/data/view-metadata-policyHeader.json",dwl:'%dw 2.0\n  output application/json\n  \n  var policyHeaderView = readUrl("classpath://dw/data/view-metadata-policyHeader.json")\n  \n  fun findObjectContent(objectType, commandId) = {\n       (objectType): payload.command.response filter ($.object.schema == objectType and $.object.commandId == commandId) map (object , index) ->\n          object.object.content\n  }\n  \n  fun findRelation(relation, relationFrom, relationType) = \n    (relation filter (($.from == relationFrom) and ($.rType == relationType))).to\n  \n  fun renderChildObjects(childObjectsArray) = {\n    children: childObjectsArray map ((child, childIndex) -> {\n      (child.viewElement.object) : findObjectContent(child.viewElement.object, child.viewElement.elementRef),\n      (if (child.viewElement.childObjects != null) \n         renderChildObjects(child.viewElement.childObjects) else {}\n      )\n    }\n    )\n  }\n  \n  var firstViewElement = policyHeaderView.view.viewElement\n  ---\n  \n  \n  {\n    (findObjectContent(firstViewElement.object, firstViewElement.elementRef)),\n    (if (firstViewElement.childObjects != null) renderChildObjects(firstViewElement.childObjects) else {})\n      //relation: findRelation(payload.command.response.relation, "PH001", policyHeaderView.view.viewElement.childObjects.viewElement[0].relationFromParent),\n  }'}}}]),e}(),F=Object(g.a)({list:{width:250},fullList:{width:"auto"}}),H=new B;function L(e){var n=F(),t=r.a.useState({top:!1,left:!1,bottom:!1,right:!1}),a=Object(s.a)(t,2),o=a[0],c=a[1],i=function(e,n){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&c(Object(l.a)(Object(l.a)({},o),{},Object(j.a)({},e,n)))}};var m;return r.a.createElement("div",null,r.a.createElement(O.a,{onClick:i("left",!0)},e.caption),r.a.createElement(E.a,{anchor:"left",open:o.left,onClose:i("left",!1)},(m="left",r.a.createElement("div",{className:n.list,role:"presentation",onClick:i(m,!1),onKeyDown:i(m,!1)},r.a.createElement(x.a,null,H.getExamplesList().map((function(n,t){return r.a.createElement(R.a,{button:!0,key:n,onClick:function(){return function(n){var t=H.getExample(n);t&&e.onSelect&&e.onSelect(Object(l.a)({},t))}(n)}},r.a.createElement(C.a,null,t%2===0?r.a.createElement(P.a,null):r.a.createElement(T.a,null)),r.a.createElement(k.a,{primary:n}))})))))))}var z=t(646),D=t(58),U=t(645),M=t(96),W=t.n(M),A=t(97),$=t.n(A),J=(t(547),t(59));var G=function(e){var n=Object(a.useState)({list:e.list,newInput:"",currentIdx:-1}),t=Object(s.a)(n,2),o=t[0],c=t[1],i=function(n){return function(t){t.preventDefault(),function(n){var t=o.list[n],a=Object(D.a)(o.list);a.splice(n,1);var r=n<a.length-1?o.currentIdx:a.length-1;c(Object(l.a)(Object(l.a)({},o),{},{list:a,currentIdx:r})),e.onSelectedResource&&e.onSelectedResource("delete",t,a[r])}(n)}},m=function(n){var t=Object(D.a)(o.list).concat(n);c({list:t,newInput:"",currentIdx:t.length-1}),e.onSelectedResource&&e.onSelectedResource("add",n,n)};return r.a.createElement("div",{className:"react-list-editable"},r.a.createElement("ul",{className:"no-bullet-list"},o.list.map((function(n,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("input",{style:{flex:"auto",marginRight:"5px",background:t===o.currentIdx?"#c0e0c0":"#c0c0c0"},onFocus:function(){return n=t,c(Object(l.a)(Object(l.a)({},o),{},{currentIdx:n})),void(e.onSelectedResource&&e.onSelectedResource("select",o.list[n],o.list[n]));var n},className:"input-field",type:"text",value:n,placeholder:e.placeholder?e.placeholder:"new resource name",onChange:function(n){!function(n,t){var a=o.list[t],r=n.target.value,s=Object(D.a)(o.list);s[t]=r,c(Object(l.a)(Object(l.a)({},o),{},{list:s})),e.onSelectedResource&&e.onSelectedResource("update",a,r)}(n,t)}}),r.a.createElement(W.a,{style:{flex:"none",color:"#8080b0"},onClick:i(t)})))}))," "),r.a.createElement(U.a,null),r.a.createElement(J.a,{style:{fontSize:"0.7em",marginTop:"7px"}},"Create new resources here:"),r.a.createElement("div",{style:{marginTop:"3px",display:"flex",flexDirection:"row"}},r.a.createElement("input",{style:{flex:"auto",marginRight:"5px"},name:"newInput",className:"input-field",onChange:function(e){c(Object(l.a)(Object(l.a)({},o),{},{newInput:e.target.value}))},onKeyUp:function(e){"Enter"===e.key&&0!==e.target.value.trim(" ").length&&m(e.target.value)},placeholder:"new resource",value:o.newInput}),r.a.createElement($.a,{style:{flex:"none",color:"#a0a0d0"},onClick:function(e){0!==o.newInput.trim(" ").length&&m(o.newInput)}})))},K=t(41);var _=function(e){var n=r.a.useState({current:Object.keys(e.resources)[0],files:e.resources}),t=Object(s.a)(n,2),o=t[0],c=t[1],i=o.files[o.current],m=Object(a.useRef)();return r.a.createElement("div",{className:"resource-Panel-Row tab-Content"},r.a.createElement("div",{style:{width:"240px",borderRightWidth:"1px",borderRightColor:"grey",borderRightStyle:"solid"}},r.a.createElement(G,{list:Object.keys(o.files),onSelectedResource:function(n,t,a){var r=Object(l.a)({},o.files);switch(n){case"delete":delete r[t];break;case"update":r[a]=r[t],delete r[t];break;case"add":r[a]={url:"http://my.url.com/content",content:'{"new": "some content"}'}}o.files=Object(l.a)({},r),o.current=a,c(Object(l.a)({},o)),"select"!==n&&e.onResourceChange&&e.onResourceChange(o.files)}})),r.a.createElement("div",{className:"resource-Panel tab-Content"},r.a.createElement(K.a,{handleWidth:!0,handleHeight:!0,onResize:function(){var e;(e=m).current&&e.current.editor.resize()}}),r.a.createElement(z.a,{className:"tab-Fixed-Content",label:"Resource Path/Url",onChange:function(n){var t={current:o.current,files:Object(l.a)(Object(l.a)({},o.files),{},Object(j.a)({},o.current,{url:n.target.value,content:i.content}))};c(t),e.onResourceChange&&e.onResourceChange(t.files)},value:i.url}),r.a.createElement(w,{ref:m,name:"resource",onChange:function(n){var t={current:o.current,files:Object(l.a)(Object(l.a)({},o.files),{},Object(j.a)({},o.current,{url:i.url,content:n}))};c(t),e.onResourceChange&&e.onResourceChange(t.files)},value:i.content})))},q=t(67),X=t.n(q),Q=t(33),Y=t.n(Q),Z=t(56),ee=t(65),ne=t.n(ee),te=t(100),ae=t(101),re=t.n(ae),oe=d.a.bind(re.a);var ce=function(){var e="No time recorded",n=r.a.useState({code:"",payload:"",results:"?",time:e,resources:{"Resource file 1":{url:"http://resources.com/file1",content:'{"sample": "text" }'}}}),t=Object(s.a)(n,2),o=t[0],c=t[1];function m(e,n){var t=Object.values(e.resources).find((function(e){return e.url&&e.url===n}));return t&&t.content?t.content:"resource not found: "+n}function d(n){if(Y.a.setResourceLoader((function(e,t){return m(n,e)})),n.payload.startsWith("<")){var t=(new te.DOMParser).parseFromString(n.payload),a=ne.a.toJsObj(t);console.log(a)}var r=X.a.runWithTimes(n.code,n.payload,{},{}),s=r.times,i=r.result;e="Dweeve parsed in: ".concat(s.parser,"ms, transpiled in ").concat(s.transpiler,"ms and executed in: ").concat(s.execution,"ms"),o.results!==i&&c(Object(l.a)(Object(l.a)({},n),{},{results:i,time:e}))}var u=Object(a.useRef)(),p=Object(a.useRef)(),b=Object(a.useRef)(),f=function(e){e.current&&e.current.editor.resize()};return r.a.createElement(Z.b,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:oe("container")},r.a.createElement("div",{className:oe("header"),height:"100px",style:{display:"flex",textAlign:"center"}},r.a.createElement(L,{caption:"Examples <--",onSelect:function(e){d(Object(l.a)(Object(l.a)({},o),{},{code:e.dwl,payload:e.payload,resources:{"example resource":{url:e.resourceName,content:e.resourceText}}}))}}),r.a.createElement("h3",{style:{flex:"auto"}},"dweeve-react-doofer")),r.a.createElement("div",{className:oe("body")},r.a.createElement(i.a,{width:"60%",direction:"e",style:{flexGrow:"1"}},r.a.createElement("div",{className:oe("content","panel")},r.a.createElement(K.a,{handleWidth:!0,handleHeight:!0,onResize:function(){return f(u)}}),r.a.createElement(w,{ref:u,name:"code",value:o.code,onChange:function(e){d(Object(l.a)(Object(l.a)({},o),{},{code:e}))}}))),r.a.createElement("div",{width:"400px",className:oe("sidebar","panel")},r.a.createElement(K.a,{handleWidth:!0,handleHeight:!0,onResize:function(){f(p)}}),r.a.createElement(h,{captions:["Payload","Resource Files"]},r.a.createElement(w,{ref:p,name:"payload",value:o.payload,onChange:function(e){d(Object(l.a)(Object(l.a)({},o),{},{payload:e}))}}),r.a.createElement(_,{resources:o.resources,onResourceChange:function(e){d(Object(l.a)(Object(l.a)({},o),{},{resources:e}))}})))),r.a.createElement(i.a,{direction:"n",style:{flexGrow:"1",flex:"auto"}},r.a.createElement("div",{className:oe("footer","panel")},r.a.createElement("div",{className:oe("footerArea")},r.a.createElement("div",{className:oe("footerAreaContent")},r.a.createElement(h,{captions:["Results","REPL"],style:{height:"100%"}},r.a.createElement("div",{className:"resource-Panel tab-Content"},r.a.createElement("span",null,o.time),r.a.createElement(K.a,{handleWidth:!0,handleHeight:!0,onResize:function(){return f(b)}}),r.a.createElement(w,{ref:b,name:"results",value:o.results})),r.a.createElement("div",{className:"resource-Panel tab-Content"},r.a.createElement(Z.a,{className:"tab-Content",theme:"dark",showControlButtons:"False",prompt:"->",welcomeMessage:"d-weeve REPL tool",errorMessage:"Unknown command, use '?' to evaluate expressions.",commands:{__eval:function(n){return function(n){Y.a.setResourceLoader((function(e,n){return m(o,e)}));var t=n,a=o.code.split("\n---");2===a.length&&(t=a[0]+"\n---"+t);var r=X.a.runWithTimes(t,o.payload,{},{}),c=r.times,l=r.result;return(e="Dweeve parsed in: ".concat(c.parser,"ms, transpiled in ").concat(c.transpiler,"ms and executed in: ").concat(c.execution,"ms"))+"\n"+l}(n)}}}))))),r.a.createElement("div",{className:oe("footerBottomBar")},"check out ",r.a.createElement("a",{href:"https://github.com/ICornwell/dweeve"},"https://github.com/ICornwell/dweeve")," for more info."))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.538f704f.chunk.js.map